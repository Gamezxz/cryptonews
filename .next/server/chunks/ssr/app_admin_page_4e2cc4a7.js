module.exports=[62085,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(83915);let e=process.env.NEXT_PUBLIC_API_URL||"http://localhost:13002";function f(a){return a?new Date(a).toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"}let g={fetch:{icon:"RSS",color:"#3b82f6"},translate:{icon:"TH",color:"#f59e0b"},scrape:{icon:"AI",color:"#a855f7"},rebuild:{icon:"BLD",color:"#22c55e"},admin:{icon:"ADM",color:"#ec4899"},error:{icon:"ERR",color:"#ef4444"}};function h(){let[a,h]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)([]),A=(0,c.useRef)(null),B=(0,c.useRef)(null),C=(0,c.useCallback)(a=>{let b=(0,d.io)(e,{path:"/socket.io",transports:["websocket","polling"]});return A.current=b,b.on("connect",()=>{r(!0),b.emit("auth",a)}),b.on("disconnect",()=>r(!1)),b.on("auth_success",()=>{h(!0),p(""),localStorage.setItem("admin_key",a)}),b.on("auth_error",a=>{p(a),h(!1),localStorage.removeItem("admin_key")}),b.on("stats",a=>{t(a),a.activityLog&&v(a.activityLog)}),b.on("activity",a=>{v(b=>[a,...b].slice(0,30))}),b.on("action_ack",a=>{("done"===a.status||"error"===a.status)&&x("")}),b.on("translate_log",a=>{let b={time:new Date().toISOString(),...a};z(a=>[...a,b].slice(-200))}),b},[]);function D(a){A.current&&!w&&(x(a),A.current.emit("action",a))}return(0,c.useEffect)(()=>{B.current&&(B.current.scrollTop=B.current.scrollHeight)},[y]),(0,c.useEffect)(()=>{let a=localStorage.getItem("admin_key");return a&&(n(a),C(a)),()=>{A.current&&A.current.disconnect()}},[C]),a?(0,b.jsxs)("div",{style:l.container,children:[(0,b.jsxs)("header",{style:l.header,children:[(0,b.jsxs)("div",{style:l.headerLeft,children:[(0,b.jsx)("span",{style:l.headerLogo,children:"C"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{style:l.headerTitle,children:"ADMIN DASHBOARD"}),(0,b.jsxs)("p",{style:l.headerSub,children:[q?(0,b.jsx)("span",{style:{color:"#22c55e"},children:"CONNECTED"}):(0,b.jsx)("span",{style:{color:"#ef4444"},children:"DISCONNECTED"}),s&&(0,b.jsxs)("span",{style:{color:"#52525b"},children:[" | Updated ",f(s.timestamp)]})]})]})]}),(0,b.jsxs)("div",{style:l.headerRight,children:[(0,b.jsx)("button",{onClick:()=>D("refresh"),disabled:!!w,style:{...l.actionBtn,borderColor:"#3b82f6",color:"#3b82f6"},children:"refresh"===w?"...":"FORCE REFRESH"}),(0,b.jsx)("button",{onClick:()=>D("rebuild"),disabled:!!w,style:{...l.actionBtn,borderColor:"#22c55e",color:"#22c55e"},children:"rebuild"===w?"...":"FORCE REBUILD"}),(0,b.jsx)("button",{onClick:()=>D("translate"),disabled:!!w,style:{...l.actionBtn,borderColor:"#a855f7",color:"#a855f7"},children:"translate"===w?"...":"FORCE TRANSLATE"}),(0,b.jsx)("button",{onClick:()=>D("recreate-cache"),disabled:!!w,style:{...l.actionBtn,borderColor:"#f59e0b",color:"#f59e0b"},children:"recreate-cache"===w?"...":"RECREATE CACHE"}),(0,b.jsx)("button",{onClick:function(){localStorage.removeItem("admin_key"),A.current&&A.current.disconnect(),h(!1),t(null),v([])},style:{...l.actionBtn,borderColor:"#ef4444",color:"#ef4444"},children:"LOGOUT"})]})]}),s?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{style:l.cardRow,children:[(0,b.jsx)(i,{label:"TOTAL ARTICLES",value:s.overview.totalArticles,color:"#f59e0b"}),(0,b.jsx)(i,{label:"TODAY",value:s.overview.todayArticles,color:"#22c55e"}),(0,b.jsx)(i,{label:"SOURCES",value:s.overview.sourcesCount,color:"#3b82f6"}),(0,b.jsx)(i,{label:"SCRAPE RATE",value:`${s.scraping.successRate}%`,color:"#a855f7"})]}),(0,b.jsxs)("div",{style:l.cardRow,children:[(0,b.jsx)(j,{title:"SCRAPING PROGRESS",items:[{label:"Scraped",value:s.scraping.scraped,color:"#22c55e"},{label:"Pending",value:s.scraping.pending,color:"#f59e0b"},{label:"Failed",value:s.scraping.failed,color:"#ef4444"}],total:s.scraping.scraped+s.scraping.pending+s.scraping.failed}),(0,b.jsx)(j,{title:"TRANSLATION PROGRESS",items:[{label:"Translated",value:s.translation.translated,color:"#3b82f6"},{label:"Pending",value:s.translation.untranslated,color:"#f59e0b"}],total:s.translation.translated+s.translation.untranslated})]}),(0,b.jsxs)("div",{style:{...l.card,marginBottom:12},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,b.jsx)("h3",{style:{...l.cardTitle,margin:0},children:"TRANSLATION TERMINAL"}),(0,b.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:["translate"===w&&(0,b.jsx)("span",{style:{fontSize:10,color:"#a855f7",letterSpacing:"0.1em"},children:"TRANSLATING..."}),(0,b.jsx)("button",{onClick:()=>z([]),style:{...l.actionBtn,padding:"4px 10px",fontSize:9,borderColor:"#52525b",color:"#52525b"},children:"CLEAR"})]})]}),(0,b.jsx)("div",{ref:B,style:{backgroundColor:"#050506",border:"1px solid #1f1f23",padding:12,height:300,overflowY:"auto",fontFamily:"'JetBrains Mono', monospace",fontSize:11,lineHeight:1.6},children:0===y.length?(0,b.jsx)("p",{style:{color:"#52525b",margin:0},children:"Waiting for translation events... Press FORCE TRANSLATE to start."}):y.map((a,c)=>(0,b.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,b.jsx)("span",{style:{color:"#52525b",flexShrink:0},children:f(a.time)}),(0,b.jsx)("span",{style:{color:"error"===a.status?"#ef4444":"ok"===a.status?"#22c55e":"done"===a.status?"#a855f7":"#a1a1aa"},children:a.message})]},c))})]}),(0,b.jsxs)("div",{style:l.cardRow3,children:[(0,b.jsxs)("div",{style:l.card,children:[(0,b.jsx)("h3",{style:l.cardTitle,children:"SENTIMENT"}),(0,b.jsxs)("div",{style:l.sentimentGrid,children:[(0,b.jsx)(k,{label:"BULLISH",value:s.sentiment.bullish||0,color:"#22c55e",total:s.overview.totalArticles}),(0,b.jsx)(k,{label:"BEARISH",value:s.sentiment.bearish||0,color:"#ef4444",total:s.overview.totalArticles}),(0,b.jsx)(k,{label:"NEUTRAL",value:s.sentiment.neutral||0,color:"#52525b",total:s.overview.totalArticles})]})]}),(0,b.jsxs)("div",{style:l.card,children:[(0,b.jsx)("h3",{style:l.cardTitle,children:"CATEGORIES"}),(0,b.jsx)("div",{style:l.listContainer,children:Object.entries(s.categories).sort((a,b)=>b[1]-a[1]).map(([a,c])=>(0,b.jsxs)("div",{style:l.listItem,children:[(0,b.jsx)("span",{style:l.listLabel,children:a.toUpperCase()}),(0,b.jsx)("span",{style:l.listValue,children:c})]},a))})]}),(0,b.jsxs)("div",{style:l.card,children:[(0,b.jsx)("h3",{style:l.cardTitle,children:"TOP SOURCES"}),(0,b.jsx)("div",{style:l.listContainer,children:Object.entries(s.sources).slice(0,10).map(([a,c])=>(0,b.jsxs)("div",{style:l.listItem,children:[(0,b.jsx)("span",{style:l.listLabel,children:a}),(0,b.jsx)("span",{style:l.listValue,children:c})]},a))})]})]}),(0,b.jsxs)("div",{style:l.cardRow,children:[(0,b.jsxs)("div",{style:{...l.card,flex:2},children:[(0,b.jsx)("h3",{style:l.cardTitle,children:"ACTIVITY LOG"}),(0,b.jsx)("div",{style:l.logContainer,children:0===u.length?(0,b.jsx)("p",{style:{color:"#52525b",fontSize:12},children:"No recent activity"}):u.map((a,c)=>{let d=g[a.type]||g.error;return(0,b.jsxs)("div",{style:l.logEntry,children:[(0,b.jsx)("span",{style:{...l.logBadge,backgroundColor:d.color+"20",color:d.color,borderColor:d.color+"40"},children:d.icon}),(0,b.jsx)("span",{style:l.logMessage,children:a.message}),a.detail&&(0,b.jsx)("span",{style:l.logDetail,children:a.detail}),(0,b.jsx)("span",{style:l.logTime,children:f(a.time)})]},c)})})]}),(0,b.jsxs)("div",{style:{...l.card,flex:1},children:[(0,b.jsx)("h3",{style:l.cardTitle,children:"RECENT ARTICLES"}),(0,b.jsx)("div",{style:l.listContainer,children:s.recentArticles?.map(a=>(0,b.jsxs)("div",{style:l.recentItem,children:[(0,b.jsxs)("div",{style:l.recentTitle,children:[a.title?.substring(0,50),"..."]}),(0,b.jsxs)("div",{style:l.recentMeta,children:[(0,b.jsx)("span",{children:a.source}),(0,b.jsx)("span",{style:{color:"scraped"===a.scrapingStatus?"#22c55e":"failed"===a.scrapingStatus?"#ef4444":"#f59e0b"},children:a.scrapingStatus||"pending"}),(0,b.jsx)("span",{children:function(a){if(!a)return"";let b=Math.floor((Date.now()-new Date(a).getTime())/1e3);if(b<60)return`${b}s ago`;let c=Math.floor(b/60);if(c<60)return`${c}m ago`;let d=Math.floor(c/60);return`${d}h ago`}(a.createdAt)})]})]},a._id))})]})]})]}):(0,b.jsx)("div",{style:l.loading,children:"Loading stats..."})]}):(0,b.jsx)("div",{style:l.loginContainer,children:(0,b.jsxs)("div",{style:l.loginBox,children:[(0,b.jsx)("div",{style:l.loginLogo,children:"C"}),(0,b.jsx)("h1",{style:l.loginTitle,children:"ADMIN DASHBOARD"}),(0,b.jsx)("p",{style:l.loginSubtitle,children:"Crypto Intelligence Monitor"}),(0,b.jsxs)("form",{onSubmit:function(a){a.preventDefault(),m.trim()&&(A.current&&A.current.disconnect(),C(m.trim()))},children:[(0,b.jsx)("input",{type:"password",value:m,onChange:a=>n(a.target.value),placeholder:"Enter admin key...",style:l.loginInput,autoFocus:!0}),(0,b.jsx)("button",{type:"submit",style:l.loginButton,children:"AUTHENTICATE"})]}),o&&(0,b.jsx)("p",{style:l.errorText,children:o})]})})}function i({label:a,value:c,color:d}){return(0,b.jsxs)("div",{style:{...l.card,...l.statCard},children:[(0,b.jsx)("p",{style:l.statLabel,children:a}),(0,b.jsx)("p",{style:{...l.statValue,color:d},children:c})]})}function j({title:a,items:c,total:d}){return(0,b.jsxs)("div",{style:{...l.card,flex:1},children:[(0,b.jsx)("h3",{style:l.cardTitle,children:a}),(0,b.jsx)("div",{style:l.progressBarBg,children:c.map((a,c)=>(0,b.jsx)("div",{style:{height:"100%",width:d>0?`${a.value/d*100}%`:"0%",backgroundColor:a.color,transition:"width 0.5s ease"}},c))}),(0,b.jsx)("div",{style:l.progressLabels,children:c.map((a,c)=>(0,b.jsxs)("div",{style:l.progressItem,children:[(0,b.jsx)("span",{style:{...l.dot,backgroundColor:a.color}}),(0,b.jsxs)("span",{style:l.progressText,children:[a.label,": ",(0,b.jsx)("strong",{children:a.value})]})]},c))})]})}function k({label:a,value:c,color:d,total:e}){let f=e>0?(c/e*100).toFixed(1):0;return(0,b.jsxs)("div",{style:{marginBottom:10},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[(0,b.jsx)("span",{style:{fontSize:11,color:"#a1a1aa",letterSpacing:"0.1em"},children:a}),(0,b.jsxs)("span",{style:{fontSize:12,color:d,fontWeight:700},children:[c," (",f,"%)"]})]}),(0,b.jsx)("div",{style:{...l.progressBarBg,height:6},children:(0,b.jsx)("div",{style:{height:"100%",width:`${f}%`,backgroundColor:d,transition:"width 0.5s ease"}})})]})}let l={loginContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#0a0a0b",fontFamily:"'JetBrains Mono', monospace"},loginBox:{textAlign:"center",padding:40,border:"1px solid #27272b",backgroundColor:"#111113",maxWidth:400,width:"100%"},loginLogo:{width:48,height:48,border:"2px solid #f59e0b",color:"#f59e0b",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:20,fontWeight:800,marginBottom:16},loginTitle:{fontSize:16,fontWeight:700,color:"#fafafa",letterSpacing:"0.15em",margin:"0 0 4px"},loginSubtitle:{fontSize:11,color:"#52525b",letterSpacing:"0.1em",margin:"0 0 24px"},loginInput:{width:"100%",padding:"12px 16px",backgroundColor:"#0a0a0b",border:"1px solid #27272b",color:"#fafafa",fontSize:14,fontFamily:"'JetBrains Mono', monospace",outline:"none",marginBottom:12,boxSizing:"border-box"},loginButton:{width:"100%",padding:"12px 16px",backgroundColor:"#f59e0b",border:"none",color:"#0a0a0b",fontSize:12,fontWeight:700,letterSpacing:"0.15em",cursor:"pointer",fontFamily:"'JetBrains Mono', monospace"},errorText:{color:"#ef4444",fontSize:12,marginTop:12},container:{minHeight:"100vh",backgroundColor:"#0a0a0b",color:"#fafafa",fontFamily:"'JetBrains Mono', monospace",padding:"0 24px 48px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 0",borderBottom:"1px solid #1f1f23",marginBottom:24,flexWrap:"wrap",gap:12},headerLeft:{display:"flex",alignItems:"center",gap:12},headerLogo:{width:36,height:36,border:"2px solid #f59e0b",color:"#f59e0b",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:16,fontWeight:800},headerTitle:{fontSize:14,fontWeight:700,letterSpacing:"0.15em",margin:0},headerSub:{fontSize:11,margin:0,letterSpacing:"0.05em"},headerRight:{display:"flex",gap:8,flexWrap:"wrap"},actionBtn:{padding:"8px 16px",backgroundColor:"transparent",border:"1px solid",fontSize:10,fontWeight:700,letterSpacing:"0.1em",cursor:"pointer",fontFamily:"'JetBrains Mono', monospace",transition:"all 0.15s ease"},loading:{textAlign:"center",padding:60,color:"#52525b",fontSize:14,letterSpacing:"0.1em"},cardRow:{display:"flex",gap:12,marginBottom:12,flexWrap:"wrap"},cardRow3:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:12,marginBottom:12},card:{backgroundColor:"#111113",border:"1px solid #1f1f23",padding:20,flex:1,minWidth:200},cardTitle:{fontSize:10,fontWeight:700,color:"#52525b",letterSpacing:"0.15em",margin:"0 0 16px",textTransform:"uppercase"},statCard:{textAlign:"center",minWidth:140},statLabel:{fontSize:10,color:"#52525b",letterSpacing:"0.15em",margin:"0 0 8px"},statValue:{fontSize:28,fontWeight:800,margin:0},progressBarBg:{display:"flex",height:8,backgroundColor:"#1f1f23",overflow:"hidden",marginBottom:12},progressLabels:{display:"flex",gap:16,flexWrap:"wrap"},progressItem:{display:"flex",alignItems:"center",gap:6},dot:{width:8,height:8,display:"inline-block"},progressText:{fontSize:11,color:"#a1a1aa"},sentimentGrid:{display:"flex",flexDirection:"column"},listContainer:{display:"flex",flexDirection:"column",gap:6,maxHeight:300,overflowY:"auto"},listItem:{display:"flex",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid #1f1f2310",fontSize:12},listLabel:{color:"#a1a1aa"},listValue:{color:"#fafafa",fontWeight:700},logContainer:{display:"flex",flexDirection:"column",gap:6,maxHeight:400,overflowY:"auto"},logEntry:{display:"flex",alignItems:"center",gap:8,padding:"6px 0",borderBottom:"1px solid #1f1f2320",fontSize:12},logBadge:{padding:"2px 6px",fontSize:9,fontWeight:700,letterSpacing:"0.05em",border:"1px solid",flexShrink:0},logMessage:{color:"#a1a1aa",flex:1},logDetail:{color:"#52525b",fontSize:11,flexShrink:0},logTime:{color:"#52525b",fontSize:10,flexShrink:0,minWidth:70,textAlign:"right"},recentItem:{padding:"8px 0",borderBottom:"1px solid #1f1f2320"},recentTitle:{fontSize:12,color:"#fafafa",marginBottom:4,lineHeight:1.4},recentMeta:{display:"flex",gap:8,fontSize:10,color:"#52525b"}};a.s(["default",()=>h])}];

//# sourceMappingURL=app_admin_page_4e2cc4a7.js.map